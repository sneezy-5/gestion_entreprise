import{d as A,r as f,ba as I,l as L,o as b,m as y,k as a,e as c,p as d,bV as m,i as p,aM as v,f as e,V as x,Z as V,be as M,ci as C,P as D,t as l,S as R,T as B,Q as j}from"./index-bfa2d538.js";import{a as O,b as $,V as Q,e as z}from"./VCard-7877ac97.js";import{V as F}from"./VDialog-5d8d2713.js";import{V as Z,a as q}from"./VPagination-5f021d48.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const H=h=>(R("data-v-998eab05"),h=h(),B(),h),J={class:"flex-end"},K=H(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase"}," Matricule "),e("th",{class:"text-uppercase"}," Nom "),e("th",{class:"text-uppercase text-center"}," Prénom "),e("th",{class:"text-uppercase text-center"}," Civilité "),e("th",{class:"text-uppercase text-center"}," Poste "),e("th",{class:"text-uppercase"}," Date de naissance "),e("th",{class:"text-uppercase"}," Lieu de naissance "),e("th",{class:"text-uppercase"}," Nationnalité "),e("th",{class:"text-uppercase"}," Phone "),e("th",{class:"text-uppercase"}," CMU "),e("th",{class:"text-uppercase"}," CNPS "),e("th",{class:"text-uppercase"}," Rue "),e("th",null," Quartier "),e("th",null," ville "),e("th",null," Pays "),e("th",{class:"text-uppercase"}," Stutus Matrimonial "),e("th",{class:"text-uppercase"}," Nombre de part "),e("th",{class:"text-uppercase"}," Nombre de charge "),e("th",{class:"text-uppercase"}," Ancièneté "),e("th",{class:"text-uppercase"}," Date d'embauche "),e("th",{class:"text-uppercase"}," Départ "),e("th",{class:"text-uppercase"}," Email "),e("th",{class:"text-uppercase text-center"}," Action ")])],-1)),W={class:"text-center"},X={class:"text-center"},Y={class:"text-center"},ee={class:"text-center"},te=["onClick"],le=["onClick"],se={class:"text-xs-center"},k=5,ae=A({__name:"DemoSimpleTableDensity",setup(h){let g=f(0);const i=I([]),r=f(!1),S=o=>{g.value=o,r.value=!0},N=()=>{r.value=!1};let P=o=>{j.push({name:"edit-employe",params:{id:o}})},u=f(1);const _=()=>{console.log(u);const o=(u.value-1)*k,n=`limit=${k}&offset=${o}`;C.getAllEmployees(n).then(s=>{const t=s.data.results;i.pop(),i.push(s.data),console.log(i[0].results,t)}).catch(s=>{(s.status="401")&&console.error(s)})},T=()=>{C.deleteEmploye(g.value).then(o=>{_()}).catch(o=>{(o.status="401")&&console.error(o)}),r.value=!1};_();const w=L(()=>{var o;return Math.ceil(((o=i[0])==null?void 0:o.count)/5)}),E=()=>{fetch("http://127.0.0.1:8000/api/v0/employes/download-excel/",{headers:{"Content-Type":"application/json",Authorization:"Bearer"+D.getToken(),database:D.getDatabase()}}).then(n=>n.blob()).then(n=>{const s=URL.createObjectURL(n),t=document.createElement("a");t.href=s,t.download="employee.xlsx",t.click(),URL.revokeObjectURL(s)}).catch(n=>{console.error("Erreur lors du téléchargement du fichier :",n)})};return(o,n)=>(b(),y(V,null,[a(F,{modelValue:p(r),"onUpdate:modelValue":n[0]||(n[0]=s=>v(r)?r.value=s:null),"max-width":"500px"},{default:c(()=>[a(O,null,{default:c(()=>[a($,{class:"headline"},{default:c(()=>[d("Confirmation de suppression")]),_:1}),a(Q,null,{default:c(()=>[d(" Êtes-vous sûr de vouloir supprimer ces données ? ")]),_:1}),a(z,null,{default:c(()=>[a(m,{onClick:T,style:{color:"red"}},{default:c(()=>[d("Confimer")]),_:1}),a(m,{onClick:N},{default:c(()=>[d("Annuler")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",J,[a(m,{to:"/create-employee",style:{"margin-right":"10px"}},{default:c(()=>[d("Ajouter")]),_:1}),a(m,{onClick:E,color:"success"},{default:c(()=>[d("Importer model à remplir "),a(x,{icon:"mdi-cloud-download"}),a(x,{icon:"mdi-microsoft-excel"})]),_:1})]),a(Z,{density:"compact"},{default:c(()=>{var s;return[K,e("tbody",null,[(b(!0),y(V,null,M((s=p(i)[0])==null?void 0:s.results,t=>(b(),y("tr",{key:t.id},[e("td",null,l(t.matricule),1),e("td",null,l(t.firstName),1),e("td",W,l(t.lastName),1),e("td",X,l(t.civility),1),e("td",Y,l(t.currentPosition),1),e("td",null,l(t.birthdate),1),e("td",null,l(t.birthplace),1),e("td",null,l(t.nationality),1),e("td",null,l(t.phonenumbers),1),e("td",null,l(t.CMUnumber),1),e("td",null,l(t.CNPSnumber),1),e("td",null,l(t.street),1),e("td",null,l(t.neighborhood),1),e("td",null,l(t.city),1),e("td",null,l(t.country),1),e("td",null,l(t.maritalStatus),1),e("td",null,l(t.NbrOfParts),1),e("td",null,l(t.numberOfDependents),1),e("td",null,l(t.seniority),1),e("td",null,l(t.hiringDate),1),e("td",null,l(t.exitDate),1),e("td",null,l(t.email),1),e("td",ee,[e("button",{onClick:U=>p(P)(t.id)},[a(x,{icon:"mdi-edit"})],8,te),e("button",{onClick:U=>S(t.id)},[a(x,{icon:"mdi-trash",style:{color:"red"}})],8,le)])]))),128))])]}),_:1}),e("div",se,[a(q,{modelValue:p(u),"onUpdate:modelValue":n[1]||(n[1]=s=>v(u)?u.value=s:u=s),length:p(w),circle:"",onClick:_},null,8,["modelValue","length"])])],64))}});const de=G(ae,[["__scopeId","data-v-998eab05"]]);export{de as D};
