import{d as i,ce as v,r as w,O as g,o as V,c as h,e as t,k as a,i as r,bS as c,N as C,V as y,p as m,t as k,bQ as B,m as S}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{c as p}from"./comptecompta.service-049e97fa.js";import{a as u,V as b}from"./VRow-b4fd1837.js";import{V as f}from"./VTextField-6bab4857.js";import{V as N}from"./VSnackbar-48185565.js";import{V as R}from"./VCounter-f481b6e6.js";import{a as D,V as F}from"./VCard-9f617b6a.js";import"./VImg-17513cc0.js";import"./forwardRefs-a29b5f65.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./index-1a500ab3.js";import"./VAvatar-d640487b.js";const T=i({__name:"DemoFormLayoutCompteEdit",setup(_){const d=v().currentRoute.value.params.id,l=w({show:!1,text:"",color:""}),e=g({name:null,balance:null,formErrors:{name:!1,balance:!1}});p.getCompte(d).then(o=>{e.id=o.data.id,e.name=o.data.name,e.balance=o.data.balance,console.log(o)}).catch(o=>{o.status==401&&console.error(o)});const E=()=>{console.log(e),p.updateCompte(e).then(o=>{e.formErrors.name=!1,e.formErrors.balance=!1,l.value={show:!0,text:"Modifié avec succès",color:"green"}}).catch(o=>{o.response.data.RequestDate?(e.formErrors.name=!0,l.value={show:!0,text:o.response.data.name,color:"red"}):e.formErrors.balance=!1,o.response.data.balance?(e.formErrors.balance=!0,l.value={show:!0,text:o.response.data.balance,color:"red"}):e.formErrors.balance=!1,console.log(o)})};return(o,s)=>(V(),h(R,{onSubmit:B(E,["prevent"]),enctype:"multipart/form-data"},{default:t(()=>[a(b,null,{default:t(()=>[a(u,{cols:"12",md:"6"},{default:t(()=>[a(f,{type:"text",modelValue:r(e).name,"onUpdate:modelValue":s[0]||(s[0]=n=>r(e).name=n),label:"Nom",placeholder:"Nom",error:r(e).formErrors.balance},null,8,["modelValue","error"])]),_:1}),a(u,{cols:"12",md:"6"},{default:t(()=>[a(f,{type:"number",modelValue:r(e).balance,"onUpdate:modelValue":s[1]||(s[1]=n=>r(e).balance=n),label:"Balance",placeholder:"Balance",error:r(e).formErrors.balance},null,8,["modelValue","error"])]),_:1}),a(N,{modelValue:r(l).show,"onUpdate:modelValue":s[3]||(s[3]=n=>r(l).show=n),timeout:3e3,color:r(l).color,top:"top"},{action:t(({attrs:n})=>[a(c,C({text:""},n,{onClick:s[2]||(s[2]=U=>r(l).show=!1)}),{default:t(()=>[a(y,null,{default:t(()=>[m("mdi-close")]),_:1})]),_:2},1040)]),default:t(()=>[m(k(r(l).text)+" ",1)]),_:1},8,["modelValue","color"]),a(u,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[a(c,{type:"submit"},{default:t(()=>[m(" Enregistré ")]),_:1}),a(c,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>[m(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),W=i({__name:"compteEdit",setup(_){return(x,d)=>(V(),S("div",null,[a(b,null,{default:t(()=>[a(u,{cols:"12"},{default:t(()=>[a(D,{title:"Editer compte"},{default:t(()=>[a(F,null,{default:t(()=>[a(T)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{W as default};
