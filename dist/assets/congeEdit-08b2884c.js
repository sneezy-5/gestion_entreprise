import{d as V,cj as g,r as k,ba as c,ci as x,co as y,o as D,c as h,e as l,k as o,i as a,bV as d,N as w,V as C,p as u,t as S,bS as R,m as U}from"./index-548d44d1.js";import{a as n,V as v}from"./VRow-4f92fdd1.js";import{V as B}from"./VSelect-881b3fd7.js";import{V as p}from"./VTextField-f85f9694.js";import{V as J}from"./VSnackbar-7e8d4438.js";import{V as M}from"./VCounter-3543cf5b.js";import{a as N,V as F}from"./VCard-fc59d69e.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-528d0b92.js";import"./index-d9ad5dd9.js";import"./VImg-a20b01d5.js";import"./ssrBoot-595446f4.js";import"./VAvatar-2a93fb47.js";import"./VOverlay-3b2ac0ae.js";import"./lazy-4c34a0b5.js";import"./easing-9f15041e.js";import"./dialog-transition-ec6f11a2.js";import"./VCheckboxBtn-172bb155.js";const T=V({__name:"DemoFormLayoutCongeEdit",setup(E){const f=g().currentRoute.value.params.id,m=k({show:!1,text:"",color:""}),i=c([]);x.getAllEmployees().then(t=>{const r=t.data.results;for(let s=0;s<r.length;s++)i.push({state:r[s].firstName,abbr:r[s].id});console.log(i)}).catch(t=>{t.status=="401"&&console.error(t)});const e=c({montant:null,cumulativeDay:null,tekanDay:null,employee:null,formErrors:{montant:!1,cumulativeDay:!1,tekanDay:!1,employee:!1}});y.getConge(f).then(t=>{e.id=t.data.id,e.montant=t.data.montant,e.cumulativeDay=t.data.cumulativeDay,e.tekanDay=t.data.tekanDay,e.employee=t.data.employee.id,console.log(t)}).catch(t=>{t.status==401&&console.error(t)});const b=()=>{console.log(e),y.updateConge(e).then(t=>{e.formErrors.montant=!1,e.formErrors.cumulativeDay=!1,e.formErrors.tekanDay=!1,e.formErrors.employee=!1,m.value={show:!0,text:"Modifé avec succès",color:"green"}}).catch(t=>{t.response.data.RequestDate?(e.formErrors.montant=!0,m.value={show:!0,text:t.response.data.montant,color:"red"}):e.formErrors.montant=!1,t.response.data.amount?(e.formErrors.cumulativeDay=!0,m.value={show:!0,text:t.response.data.cumulativeDay,color:"red"}):e.formErrors.cumulativeDay=!1,t.response.data.tekanDay?(e.formErrors.tekanDay=!0,m.value={show:!0,text:t.response.data.tekanDay,color:"red"}):e.formErrors.tekanDay=!1,console.log(t)})};return(t,r)=>(D(),h(M,{onSubmit:R(b,["prevent"]),enctype:"multipart/form-data"},{default:l(()=>[o(v,null,{default:l(()=>[o(n,{cols:"12",md:"6"},{default:l(()=>[o(B,{modelValue:a(e).employee,"onUpdate:modelValue":r[0]||(r[0]=s=>a(e).employee=s),label:"Employés",items:a(i),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:a(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"number",modelValue:a(e).montant,"onUpdate:modelValue":r[1]||(r[1]=s=>a(e).montant=s),label:"Montant",placeholder:"Montant",error:a(e).formErrors.montant},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"number",modelValue:a(e).cumulativeDay,"onUpdate:modelValue":r[2]||(r[2]=s=>a(e).cumulativeDay=s),label:"Jour cumulé",placeholder:"Jour cumulé",error:a(e).formErrors.cumulativeDay},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"number",modelValue:a(e).tekanDay,"onUpdate:modelValue":r[3]||(r[3]=s=>a(e).tekanDay=s),label:"Jour pris",placeholder:"Jour pris",error:a(e).formErrors.tekanDay},null,8,["modelValue","error"])]),_:1}),o(J,{modelValue:a(m).show,"onUpdate:modelValue":r[5]||(r[5]=s=>a(m).show=s),timeout:3e3,color:a(m).color,top:"top"},{action:l(({attrs:s})=>[o(d,w({text:""},s,{onClick:r[4]||(r[4]=P=>a(m).show=!1)}),{default:l(()=>[o(C,null,{default:l(()=>[u("mdi-close")]),_:1})]),_:2},1040)]),default:l(()=>[u(S(a(m).text)+" ",1)]),_:1},8,["modelValue","color"]),o(n,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[o(d,{type:"submit"},{default:l(()=>[u(" Enregistré ")]),_:1}),o(d,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[u(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),oe=V({__name:"congeEdit",setup(E){return(_,f)=>(D(),U("div",null,[o(v,null,{default:l(()=>[o(n,{cols:"12"},{default:l(()=>[o(N,{title:"Editer congé"},{default:l(()=>[o(F,null,{default:l(()=>[o(T)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{oe as default};
