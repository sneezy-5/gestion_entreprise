import{d as S,r as g,ba as L,l as N,o as h,m as C,k as s,e as c,p as u,bV as f,i as _,aM as v,f as t,V as m,Z as b,be as j,ck as y,P as k,t as n,S as P,T as $,Q as F,c as M}from"./index-bfa2d538.js";import{a as w,b as O,V as z,e as Q}from"./VCard-7877ac97.js";import{V as Z}from"./VDialog-5d8d2713.js";import{V as q,a as G}from"./VPagination-5f021d48.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{a as J,V as K}from"./VRow-18416828.js";import"./VAvatar-b5327750.js";import"./VImg-d7e6df3b.js";import"./VOverlay-b657f991.js";import"./lazy-98d5b0cb.js";import"./easing-9f15041e.js";import"./forwardRefs-a29b5f65.js";import"./dialog-transition-44bf92b2.js";const W=p=>(P("data-v-f2fe8cf6"),p=p(),$(),p),X={class:"flex-end"},Y=W(()=>t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase"}," Employé "),t("th",{class:"text-uppercase text-center"}," Contrat "),t("th",{class:"text-uppercase text-center"}," Salaire de base "),t("th",{class:"text-uppercase text-center"}," Sur salaire "),t("th",{class:"text-uppercase text-center"}," Poste "),t("th",{class:"text-uppercase text-center"}," Transport "),t("th",{class:"text-uppercase text-center"}," Debut "),t("th",{class:"text-uppercase text-center"}," Fin "),t("th",{class:"text-uppercase text-center"}," Date de signature "),t("th",{class:"text-uppercase text-center"}," Action ")])],-1)),tt={class:"text-center"},et={class:"text-center"},st={class:"text-center"},at={class:"text-center"},ot={class:"text-center"},ct={class:"text-center"},lt={class:"text-center"},nt={class:"text-center"},rt={class:"text-center"},dt=["onClick"],it=["onClick"],ut={class:"text-xs-center"},D=5,pt=S({__name:"DemoSimpleTableDensityContract",setup(p){let x=g(0);const r=L([]),d=g(!1),T=o=>{x.value=o,d.value=!0},A=()=>{d.value=!1};let E=o=>{F.push({name:"edit-contract",params:{id:o}})},i=g(1);const V=()=>{console.log(i);const o=(i.value-1)*D,l=`limit=${D}&offset=${o}`;y.getAllContracts(l).then(a=>{const e=a.data.results;r.pop(),r.push(a.data),console.log(r[0].results,e)}).catch(a=>{(a.status="401")&&console.error(a)})},U=()=>{y.deleteContracts(x.value).then(o=>{V()}).catch(o=>{(o.status="401")&&console.error(o)}),d.value=!1};V();const B=N(()=>{var o;return Math.ceil(((o=r[0])==null?void 0:o.count)/5)}),I=()=>{fetch("http://127.0.0.1:8000/api/v0/contrat/download-excel/",{headers:{"Content-Type":"application/json",Authorization:"Bearer"+k.getToken(),database:k.getDatabase()}}).then(l=>l.blob()).then(l=>{const a=URL.createObjectURL(l),e=document.createElement("a");e.href=a,e.download="contrat.xlsx",e.click(),URL.revokeObjectURL(a)}).catch(l=>{console.error("Erreur lors du téléchargement du fichier :",l)})};return(o,l)=>(h(),C(b,null,[s(Z,{modelValue:_(d),"onUpdate:modelValue":l[0]||(l[0]=a=>v(d)?d.value=a:null),"max-width":"500px"},{default:c(()=>[s(w,null,{default:c(()=>[s(O,{class:"headline"},{default:c(()=>[u("Confirmation de suppression")]),_:1}),s(z,null,{default:c(()=>[u(" Êtes-vous sûr de vouloir supprimer ces données ? ")]),_:1}),s(Q,null,{default:c(()=>[s(f,{onClick:U,style:{color:"red"}},{default:c(()=>[u("Confimer")]),_:1}),s(f,{onClick:A},{default:c(()=>[u("Annuler")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t("div",X,[s(f,{to:"/create-contract",style:{"margin-right":"10px"}},{default:c(()=>[u("Ajouter")]),_:1}),s(f,{onClick:I,color:"success"},{default:c(()=>[u("Importer model à remplir "),s(m,{icon:"mdi-cloud-download"}),s(m,{icon:"mdi-microsoft-excel"})]),_:1})]),s(q,{density:"compact"},{default:c(()=>{var a;return[Y,t("tbody",null,[(h(!0),C(b,null,j((a=_(r)[0])==null?void 0:a.results,e=>(h(),C("tr",{key:e.id},[t("td",null,n(e.user.employee.firstName)+" "+n(e.user.employee.lastName),1),t("td",tt,n(e.contract_type),1),t("td",et,n(e.baseSalary),1),t("td",st,n(e.extrapay),1),t("td",at,n(e.position),1),t("td",ot,n(e.transportationAllowance),1),t("td",ct,n(e.startDate),1),t("td",lt,n(e.endDate),1),t("td",nt,n(e.signingDate),1),t("td",rt,[t("button",{onClick:R=>_(E)(e.id)},[s(m,{icon:"mdi-edit"})],8,dt),t("button",{onClick:R=>T(e.id)},[s(m,{icon:"mdi-trash",style:{color:"red"}})],8,it)])]))),128))])]}),_:1}),t("div",ut,[s(G,{modelValue:_(i),"onUpdate:modelValue":l[1]||(l[1]=a=>v(i)?i.value=a:i=a),length:_(B),circle:"",onClick:V},null,8,["modelValue","length"])])],64))}});const _t=H(pt,[["__scopeId","data-v-f2fe8cf6"]]),wt=S({__name:"contract",setup(p){return(x,r)=>(h(),M(K,null,{default:c(()=>[s(J,{cols:"12"},{default:c(()=>[s(w,{title:"Contrats"},{default:c(()=>[s(_t)]),_:1})]),_:1})]),_:1}))}});export{wt as default};
