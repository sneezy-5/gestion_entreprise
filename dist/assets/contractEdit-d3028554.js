import{d as V,r as w,O as f,P as S,o as g,c as _,e as s,k as o,i as t,bS as u,N as v,V as A,p as i,t as C,bQ as h,m as U}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{e as k}from"./employees.service-ebfa0509.js";import{c}from"./contract.service-96fe3064.js";import{a as d,V as D}from"./VRow-b4fd1837.js";import{V as y}from"./VSelect-d3819a80.js";import{V as p}from"./VTextField-6bab4857.js";import{V as T}from"./VSnackbar-48185565.js";import{V as F}from"./VCounter-f481b6e6.js";import{a as P,V as B}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const N=V({__name:"DemoFormLayoutContractEdit",setup(E){const n=w({show:!1,text:"",color:""}),m=f([]),b=S.currentRoute.value.params.id;k.getAllEmployees().then(a=>{const r=a.data.results;for(let l=0;l<r.length;l++)m.push({state:r[l].firstName,abbr:r[l].id});console.log(m)}).catch(a=>{a.status=="401"&&console.error(a)});const e=f({contract_type:"CDD",position:"",baseSalary:"",extrapay:"",transportationAllowance:"",signingDate:"",startDate:"",endDate:"",employee:"",formErrors:{contract_type:!1,position:!1,baseSalary:!1,extrapay:!1,transportationAllowance:!1,signingDate:!1,startDate:!1,endDate:!1,employee:!1}});c.getContracts(b).then(a=>{e.id=a.data.id,e.contract_type=a.data.contract_type,e.position=a.data.position,e.baseSalary=a.data.baseSalary,e.extrapay=a.data.extrapay,e.transportationAllowance=a.data.transportationAllowance,e.signingDate=a.data.signingDate,e.startDate=a.data.startDate,e.endDate=a.data.endDate,e.employee=a.data.employee.id,console.log(a)}).catch(a=>{a.status==401&&console.error(a)});const x=()=>{console.log(e),c.updateContracts(e).then(a=>{e.formErrors.contract_type=!1,e.formErrors.position=!1,e.formErrors.baseSalary=!1,e.formErrors.extrapay=!1,e.formErrors.transportationAllowance=!1,e.formErrors.signingDate=!1,e.formErrors.startDate=!1,e.formErrors.endDate=!1,e.formErrors.employee=!1,n.value={show:!0,text:"Modifié avec succès",color:"success"},e.contract_type="",e.position="",e.baseSalary="",e.extrapay="",e.transportationAllowance="",e.signingDate="",e.startDate="",e.endDate="",e.employee=""}).catch(a=>{a.response.data.contract_type?(e.formErrors.contract_type=!0,n.value={show:!0,text:a.response.data.contract_type,color:"danger"}):e.formErrors.contract_type=!1,a.response.data.position?(e.formErrors.position=!0,n.value={show:!0,text:a.response.data.position,color:"danger"}):e.formErrors.position=!1,a.response.data.baseSalary?(e.formErrors.baseSalary=!0,n.value={show:!0,text:a.response.data.baseSalary,color:"danger"}):e.formErrors.baseSalary=!1,a.response.data.extrapay?(e.formErrors.extrapay=!0,n.value={show:!0,text:a.response.data.extrapay,color:"danger"}):e.formErrors.extrapay=!1,a.response.data.transportationAllowance,e.formErrors.transportationAllowance=!1,a.response.data.signingDate?(e.formErrors.signingDate=!0,n.value={show:!0,text:a.response.data.signingDate,color:"danger"}):e.formErrors.signingDate=!1,a.response.data.startDate?(e.formErrors.startDate=!0,n.value={show:!0,text:a.response.data.startDate,color:"danger"}):e.formErrors.startDate=!1,a.response.data.endDate?(e.formErrors.endDate=!0,n.value={show:!0,text:a.response.data.endDate,color:"danger"}):e.formErrors.endDate=!1,a.response.data.employee?(e.formErrors.employee=!0,n.value={show:!0,text:a.response.data.employee,color:"danger"}):e.formErrors.employee=!1,console.log(a)})};return(a,r)=>(g(),_(F,{onSubmit:h(x,["prevent"]),enctype:"multipart/form-data"},{default:s(()=>[o(D,null,{default:s(()=>[o(d,{cols:"12",md:"6"},{default:s(()=>[o(y,{modelValue:t(e).employee,"onUpdate:modelValue":r[0]||(r[0]=l=>t(e).employee=l),label:"Employés",items:t(m),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:t(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(y,{modelValue:t(e).contract_type,"onUpdate:modelValue":r[1]||(r[1]=l=>t(e).contract_type=l),label:"Contrat",items:["CDD","CDI","STAGE"],error:t(e).formErrors.contract_type},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{modelValue:t(e).position,"onUpdate:modelValue":r[2]||(r[2]=l=>t(e).position=l),label:"Poste",placeholder:"Poste",error:t(e).formErrors.position},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"number",modelValue:t(e).baseSalary,"onUpdate:modelValue":r[3]||(r[3]=l=>t(e).baseSalary=l),label:"Salaire de base",placeholder:"Salaire de base",error:t(e).formErrors.baseSalary},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"number",modelValue:t(e).extrapay,"onUpdate:modelValue":r[4]||(r[4]=l=>t(e).extrapay=l),label:"Sur salaie",placeholder:"Sur salaire",error:t(e).formErrors.extrapay},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"number",modelValue:t(e).transportationAllowance,"onUpdate:modelValue":r[5]||(r[5]=l=>t(e).transportationAllowance=l),label:"Transport",placeholder:"Transport",error:t(e).formErrors.transportationAllowance},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"date",modelValue:t(e).startDate,"onUpdate:modelValue":r[6]||(r[6]=l=>t(e).startDate=l),label:"Debut",placeholder:"Debut",error:t(e).formErrors.startDate},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"date",modelValue:t(e).endDate,"onUpdate:modelValue":r[7]||(r[7]=l=>t(e).endDate=l),label:"Fin",placeholder:"Fin",error:t(e).formErrors.endDate},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:s(()=>[o(p,{type:"date",modelValue:t(e).signingDate,"onUpdate:modelValue":r[8]||(r[8]=l=>t(e).signingDate=l),label:"Signature",placeholder:"Signature",error:t(e).formErrors.signingDate},null,8,["modelValue","error"])]),_:1}),o(T,{modelValue:t(n).show,"onUpdate:modelValue":r[10]||(r[10]=l=>t(n).show=l),timeout:3e3,color:t(n).color,top:"top"},{action:s(({attrs:l})=>[o(u,v({text:""},l,{onClick:r[9]||(r[9]=R=>t(n).show=!1)}),{default:s(()=>[o(A,null,{default:s(()=>[i("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[i(C(t(n).text)+" ",1)]),_:1},8,["modelValue","color"]),o(d,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[o(u,{type:"submit"},{default:s(()=>[i(" Enregistré ")]),_:1}),o(u,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[i(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),re=V({__name:"contractEdit",setup(E){return(n,m)=>(g(),U("div",null,[o(D,null,{default:s(()=>[o(d,{cols:"12"},{default:s(()=>[o(P,{title:"Ajouter contrat"},{default:s(()=>[o(B,null,{default:s(()=>[o(N)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{re as default};
