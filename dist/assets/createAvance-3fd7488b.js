import{d as c,r as b,ba as i,ci as E,o as y,c as h,e as s,k as o,i as t,bV as f,N as q,V as v,p,t as x,bS as _,cm as w,m as M}from"./index-548d44d1.js";import{a as n,V}from"./VRow-4f92fdd1.js";import{V as g}from"./VSelect-881b3fd7.js";import{V as u}from"./VTextField-f85f9694.js";import{V as S}from"./VSnackbar-7e8d4438.js";import{V as U}from"./VCounter-3543cf5b.js";import{a as k,V as C}from"./VCard-fc59d69e.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-528d0b92.js";import"./index-d9ad5dd9.js";import"./VImg-a20b01d5.js";import"./ssrBoot-595446f4.js";import"./VAvatar-2a93fb47.js";import"./VOverlay-3b2ac0ae.js";import"./lazy-4c34a0b5.js";import"./easing-9f15041e.js";import"./dialog-transition-ec6f11a2.js";import"./VCheckboxBtn-172bb155.js";const A=c({__name:"DemoFormLayoutAvance",setup(D){const m=b({show:!1,text:"",color:""}),d=i([]);E.getAllEmployees().then(l=>{const a=l.data.results;for(let r=0;r<a.length;r++)d.push({state:a[r].firstName,abbr:a[r].id});console.log(d)}).catch(l=>{l.status=="401"&&console.error(l)});const e=i({RequestDate:null,amountRequested:null,paymentDate:null,paymentMethod:"",ReimbursmentDate:null,employee:null,formErrors:{RequestDate:!1,amountRequested:!1,paymentDate:!1,paymentMethod:!1,ReimbursmentDate:!1,employee:!1}}),R=()=>{console.log(e),w.createAvance(e).then(l=>{e.formErrors.RequestDate=!1,e.formErrors.amountRequested=!1,e.formErrors.paymentDate=!1,e.formErrors.paymentMethod=!1,e.formErrors.ReimbursmentDate=!1,e.formErrors.employee=!1,m.value={show:!0,text:"Enregistré avec succès",color:"green"}}).catch(l=>{l.response.data.RequestDate?(e.formErrors.RequestDate=!0,m.value={show:!0,text:l.response.data.RequestDate,color:"red"}):e.formErrors.RequestDate=!1,l.response.data.amountRequested?(e.formErrors.amountRequested=!0,m.value={show:!0,text:l.response.data.amountRequested,color:"red"}):e.formErrors.amountRequested=!1,l.response.data.paymentDate?(e.formErrors.paymentDate=!0,m.value={show:!0,text:l.response.data.paymentDate,color:"red"}):e.formErrors.paymentDate=!1,l.response.data.paymentMethod?(e.formErrors.paymentMethod=!0,m.value={show:!0,text:l.response.data.paymentMethod,color:"red"}):e.formErrors.paymentMethod=!1,l.response.data.ReimbursmentDate,e.formErrors.ReimbursmentDate=!1,l.response.data.employee?(e.formErrors.employee=!0,m.value={show:!0,text:l.response.data.employee,color:"red"}):e.formErrors.employee=!1,console.log(l)})};return(l,a)=>(y(),h(U,{onSubmit:_(R,["prevent"]),enctype:"multipart/form-data"},{default:s(()=>[o(V,null,{default:s(()=>[o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:t(e).employee,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).employee=r),label:"Employés",items:t(d),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:t(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).RequestDate,"onUpdate:modelValue":a[1]||(a[1]=r=>t(e).RequestDate=r),label:"Date de la demande",placeholder:"Date de la demande",error:t(e).formErrors.RequestDate},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"number",modelValue:t(e).amountRequested,"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).amountRequested=r),label:"Montant demandé",placeholder:"Montant demandé",error:t(e).formErrors.amountRequested},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).paymentDate,"onUpdate:modelValue":a[3]||(a[3]=r=>t(e).paymentDate=r),label:"Date de paie",placeholder:"Date de paie",error:t(e).formErrors.paymentDate},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"text",modelValue:t(e).paymentMethod,"onUpdate:modelValue":a[4]||(a[4]=r=>t(e).paymentMethod=r),label:"methode de paie",placeholder:"methode de paie",error:t(e).formErrors.paymentMethod},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).ReimbursmentDate,"onUpdate:modelValue":a[5]||(a[5]=r=>t(e).ReimbursmentDate=r),label:"Date de remboursement",placeholder:"Date de remboursement",error:t(e).formErrors.ReimbursmentDate},null,8,["modelValue","error"])]),_:1}),o(S,{modelValue:t(m).show,"onUpdate:modelValue":a[7]||(a[7]=r=>t(m).show=r),timeout:3e3,color:t(m).color,top:"top"},{action:s(({attrs:r})=>[o(f,q({text:""},r,{onClick:a[6]||(a[6]=B=>t(m).show=!1)}),{default:s(()=>[o(v,null,{default:s(()=>[p("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[p(x(t(m).text)+" ",1)]),_:1},8,["modelValue","color"]),o(n,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[o(f,{type:"submit"},{default:s(()=>[p(" Enregistré ")]),_:1}),o(f,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[p(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),Z=c({__name:"createAvance",setup(D){return(m,d)=>(y(),M("div",null,[o(V,null,{default:s(()=>[o(n,{cols:"12"},{default:s(()=>[o(k,{title:"Ajouter avance"},{default:s(()=>[o(C,null,{default:s(()=>[o(A)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{Z as default};
