import{d as c,r as E,O as i,o as y,c as b,e as s,k as o,i as t,bS as f,N as h,V as q,p,t as v,bQ as x,m as _}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{e as w}from"./employees.service-ebfa0509.js";import{a as M}from"./avence.service-4ab4d22b.js";import{a as n,V}from"./VRow-b4fd1837.js";import{V as g}from"./VSelect-d3819a80.js";import{V as u}from"./VTextField-6bab4857.js";import{V as S}from"./VSnackbar-48185565.js";import{V as U}from"./VCounter-f481b6e6.js";import{a as k,V as C}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const A=c({__name:"DemoFormLayoutAvance",setup(D){const m=E({show:!1,text:"",color:""}),d=i([]);w.getAllEmployees().then(l=>{const a=l.data.results;for(let r=0;r<a.length;r++)d.push({state:a[r].firstName,abbr:a[r].id});console.log(d)}).catch(l=>{l.status=="401"&&console.error(l)});const e=i({RequestDate:null,amountRequested:null,paymentDate:null,paymentMethod:"",ReimbursmentDate:null,employee:null,formErrors:{RequestDate:!1,amountRequested:!1,paymentDate:!1,paymentMethod:!1,ReimbursmentDate:!1,employee:!1}}),R=()=>{console.log(e),M.createAvance(e).then(l=>{e.formErrors.RequestDate=!1,e.formErrors.amountRequested=!1,e.formErrors.paymentDate=!1,e.formErrors.paymentMethod=!1,e.formErrors.ReimbursmentDate=!1,e.formErrors.employee=!1,m.value={show:!0,text:"Enregistré avec succès",color:"green"}}).catch(l=>{l.response.data.RequestDate?(e.formErrors.RequestDate=!0,m.value={show:!0,text:l.response.data.RequestDate,color:"red"}):e.formErrors.RequestDate=!1,l.response.data.amountRequested?(e.formErrors.amountRequested=!0,m.value={show:!0,text:l.response.data.amountRequested,color:"red"}):e.formErrors.amountRequested=!1,l.response.data.paymentDate?(e.formErrors.paymentDate=!0,m.value={show:!0,text:l.response.data.paymentDate,color:"red"}):e.formErrors.paymentDate=!1,l.response.data.paymentMethod?(e.formErrors.paymentMethod=!0,m.value={show:!0,text:l.response.data.paymentMethod,color:"red"}):e.formErrors.paymentMethod=!1,l.response.data.ReimbursmentDate,e.formErrors.ReimbursmentDate=!1,l.response.data.employee?(e.formErrors.employee=!0,m.value={show:!0,text:l.response.data.employee,color:"red"}):e.formErrors.employee=!1,console.log(l)})};return(l,a)=>(y(),b(U,{onSubmit:x(R,["prevent"]),enctype:"multipart/form-data"},{default:s(()=>[o(V,null,{default:s(()=>[o(n,{cols:"12",md:"6"},{default:s(()=>[o(g,{modelValue:t(e).employee,"onUpdate:modelValue":a[0]||(a[0]=r=>t(e).employee=r),label:"Employés",items:t(d),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:t(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).RequestDate,"onUpdate:modelValue":a[1]||(a[1]=r=>t(e).RequestDate=r),label:"Date de la demande",placeholder:"Date de la demande",error:t(e).formErrors.RequestDate},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"number",modelValue:t(e).amountRequested,"onUpdate:modelValue":a[2]||(a[2]=r=>t(e).amountRequested=r),label:"Montant demandé",placeholder:"Montant demandé",error:t(e).formErrors.amountRequested},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).paymentDate,"onUpdate:modelValue":a[3]||(a[3]=r=>t(e).paymentDate=r),label:"Date de paie",placeholder:"Date de paie",error:t(e).formErrors.paymentDate},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"text",modelValue:t(e).paymentMethod,"onUpdate:modelValue":a[4]||(a[4]=r=>t(e).paymentMethod=r),label:"methode de paie",placeholder:"methode de paie",error:t(e).formErrors.paymentMethod},null,8,["modelValue","error"])]),_:1}),o(n,{cols:"12",md:"6"},{default:s(()=>[o(u,{type:"date",modelValue:t(e).ReimbursmentDate,"onUpdate:modelValue":a[5]||(a[5]=r=>t(e).ReimbursmentDate=r),label:"Date de remboursement",placeholder:"Date de remboursement",error:t(e).formErrors.ReimbursmentDate},null,8,["modelValue","error"])]),_:1}),o(S,{modelValue:t(m).show,"onUpdate:modelValue":a[7]||(a[7]=r=>t(m).show=r),timeout:3e3,color:t(m).color,top:"top"},{action:s(({attrs:r})=>[o(f,h({text:""},r,{onClick:a[6]||(a[6]=B=>t(m).show=!1)}),{default:s(()=>[o(q,null,{default:s(()=>[p("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[p(v(t(m).text)+" ",1)]),_:1},8,["modelValue","color"]),o(n,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[o(f,{type:"submit"},{default:s(()=>[p(" Enregistré ")]),_:1}),o(f,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[p(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),oe=c({__name:"createAvance",setup(D){return(m,d)=>(y(),_("div",null,[o(V,null,{default:s(()=>[o(n,{cols:"12"},{default:s(()=>[o(k,{title:"Ajouter avance"},{default:s(()=>[o(C,null,{default:s(()=>[o(A)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{oe as default};
