import{d as y,r as b,O as f,o as V,c as x,e as s,k as t,i as r,bS as u,N as w,V as S,p as i,t as _,bQ as v,m as A}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{e as C}from"./employees.service-ebfa0509.js";import{c as U}from"./contract.service-96fe3064.js";import{a as m,V as g}from"./VRow-b4fd1837.js";import{V as c}from"./VSelect-d3819a80.js";import{V as p}from"./VTextField-6bab4857.js";import{V as h}from"./VSnackbar-48185565.js";import{V as k}from"./VCounter-f481b6e6.js";import{a as T,V as F}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const B=y({__name:"DemoFormLayoutContract",setup(E){const n=b({show:!1,text:"",color:""}),d=f([]);C.getAllEmployees().then(l=>{const a=l.data.results;for(let o=0;o<a.length;o++)d.push({state:a[o].firstName,abbr:a[o].id});console.log(d)}).catch(l=>{l.status=="401"&&console.error(l)});const e=f({contract_type:"CDD",position:"",baseSalary:"",extrapay:"",transportationAllowance:"",signingDate:"",startDate:"",endDate:"",employee:"",formErrors:{contract_type:!1,position:!1,baseSalary:!1,extrapay:!1,transportationAllowance:!1,signingDate:!1,startDate:!1,endDate:!1,employee:!1}}),D=()=>{console.log(e),U.createContracts(e).then(l=>{e.formErrors.contract_type=!1,e.formErrors.position=!1,e.formErrors.baseSalary=!1,e.formErrors.extrapay=!1,e.formErrors.transportationAllowance=!1,e.formErrors.signingDate=!1,e.formErrors.startDate=!1,e.formErrors.endDate=!1,e.formErrors.employee=!1,n.value={show:!0,text:"Enregistré avec succès",color:"success"},e.contract_type="",e.position="",e.baseSalary="",e.extrapay="",e.transportationAllowance="",e.signingDate="",e.startDate="",e.endDate="",e.employee=""}).catch(l=>{l.response.data.contract_type?(e.formErrors.contract_type=!0,n.value={show:!0,text:l.response.data.contract_type,color:"danger"}):e.formErrors.contract_type=!1,l.response.data.position?(e.formErrors.position=!0,n.value={show:!0,text:l.response.data.position,color:"danger"}):e.formErrors.position=!1,l.response.data.baseSalary?(e.formErrors.baseSalary=!0,n.value={show:!0,text:l.response.data.baseSalary,color:"danger"}):e.formErrors.baseSalary=!1,l.response.data.extrapay?(e.formErrors.extrapay=!0,n.value={show:!0,text:l.response.data.extrapay,color:"danger"}):e.formErrors.extrapay=!1,l.response.data.transportationAllowance,e.formErrors.transportationAllowance=!1,l.response.data.signingDate?(e.formErrors.signingDate=!0,n.value={show:!0,text:l.response.data.signingDate,color:"danger"}):e.formErrors.signingDate=!1,l.response.data.startDate?(e.formErrors.startDate=!0,n.value={show:!0,text:l.response.data.startDate,color:"danger"}):e.formErrors.startDate=!1,l.response.data.endDate?(e.formErrors.endDate=!0,n.value={show:!0,text:l.response.data.endDate,color:"danger"}):e.formErrors.endDate=!1,l.response.data.employee?(e.formErrors.employee=!0,n.value={show:!0,text:l.response.data.employee,color:"danger"}):e.formErrors.employee=!1,console.log(l)})};return(l,a)=>(V(),x(k,{onSubmit:v(D,["prevent"]),enctype:"multipart/form-data"},{default:s(()=>[t(g,null,{default:s(()=>[t(m,{cols:"12",md:"6"},{default:s(()=>[t(c,{modelValue:r(e).employee,"onUpdate:modelValue":a[0]||(a[0]=o=>r(e).employee=o),label:"Employés",items:r(d),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:r(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(c,{modelValue:r(e).contract_type,"onUpdate:modelValue":a[1]||(a[1]=o=>r(e).contract_type=o),label:"Contrat",items:["CDD","CDI","STAGE"],error:r(e).formErrors.contract_type},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{modelValue:r(e).position,"onUpdate:modelValue":a[2]||(a[2]=o=>r(e).position=o),label:"Poste",placeholder:"Poste",error:r(e).formErrors.position},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"number",modelValue:r(e).baseSalary,"onUpdate:modelValue":a[3]||(a[3]=o=>r(e).baseSalary=o),label:"Salaire de base",placeholder:"Salaire de base",error:r(e).formErrors.baseSalary},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"number",modelValue:r(e).extrapay,"onUpdate:modelValue":a[4]||(a[4]=o=>r(e).extrapay=o),label:"Sur salaie",placeholder:"Sur salaire",error:r(e).formErrors.extrapay},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"number",modelValue:r(e).transportationAllowance,"onUpdate:modelValue":a[5]||(a[5]=o=>r(e).transportationAllowance=o),label:"Transport",placeholder:"Transport",error:r(e).formErrors.transportationAllowance},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"date",modelValue:r(e).startDate,"onUpdate:modelValue":a[6]||(a[6]=o=>r(e).startDate=o),label:"Debut contrat",placeholder:"Debut",error:r(e).formErrors.startDate},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"date",modelValue:r(e).endDate,"onUpdate:modelValue":a[7]||(a[7]=o=>r(e).endDate=o),label:"Fin contrat",placeholder:"Fin",error:r(e).formErrors.endDate},null,8,["modelValue","error"])]),_:1}),t(m,{cols:"12",md:"6"},{default:s(()=>[t(p,{type:"date",modelValue:r(e).signingDate,"onUpdate:modelValue":a[8]||(a[8]=o=>r(e).signingDate=o),label:"Signature",placeholder:"Signature",error:r(e).formErrors.signingDate},null,8,["modelValue","error"])]),_:1}),t(h,{modelValue:r(n).show,"onUpdate:modelValue":a[10]||(a[10]=o=>r(n).show=o),timeout:3e3,color:r(n).color,top:"top"},{action:s(({attrs:o})=>[t(u,w({text:""},o,{onClick:a[9]||(a[9]=N=>r(n).show=!1)}),{default:s(()=>[t(S,null,{default:s(()=>[i("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[i(_(r(n).text)+" ",1)]),_:1},8,["modelValue","color"]),t(m,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[t(u,{type:"submit"},{default:s(()=>[i(" Enregistré ")]),_:1}),t(u,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[i(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),te=y({__name:"createContract",setup(E){return(n,d)=>(V(),A("div",null,[t(g,null,{default:s(()=>[t(m,{cols:"12"},{default:s(()=>[t(T,{title:"Ajouter contrat"},{default:s(()=>[t(F,null,{default:s(()=>[t(B)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{te as default};
