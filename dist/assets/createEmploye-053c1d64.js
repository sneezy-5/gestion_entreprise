import{d as w,r as c,ba as g,o as C,m as D,k as o,e as s,f as m,bV as p,V as b,bS as x,i as r,N as I,p as h,t as A,Z as j,ci as v,P as N}from"./index-548d44d1.js";import{a as U}from"./avatar-1-4acd3e19.js";import{V as u}from"./VTextField-f85f9694.js";import{V as y,a as T}from"./VCard-fc59d69e.js";import{V as S,a as i}from"./VRow-4f92fdd1.js";import{V as P}from"./VSelect-881b3fd7.js";import{V as B}from"./VAvatar-2a93fb47.js";import{V as G}from"./VSnackbar-7e8d4438.js";import{V as z}from"./VCounter-3543cf5b.js";import"./VImg-a20b01d5.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-528d0b92.js";import"./index-d9ad5dd9.js";import"./ssrBoot-595446f4.js";import"./VOverlay-3b2ac0ae.js";import"./lazy-4c34a0b5.js";import"./easing-9f15041e.js";import"./dialog-transition-ec6f11a2.js";import"./VCheckboxBtn-172bb155.js";const $=["onSubmit"],J={class:"d-flex flex-wrap gap-2"},Q=m("span",{class:"d-none d-sm-block"},"Importer",-1),q=m("p",{class:"text-body-1 mb-0"}," Taille maximale autorisée : 2 Mo (xlsx) ",-1),H={class:"d-flex flex-column justify-center gap-5"},K={class:"d-flex flex-wrap gap-2"},Z=m("span",{class:"d-none d-sm-block"},"Photo",-1),W=m("span",{class:"d-none d-sm-block"},"Reset",-1),X=m("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),Y=w({__name:"DemoFormLayoutEmployee",setup(_){const n=c({show:!1,text:"",color:""}),d=g({file:null}),e=g({matricule:"",civility:"Femme",firstName:"",lastName:"",birthdate:null,birthplace:"",nationality:"",pictureURL:"",CNPSnumber:"",CMUnumber:"",street:"",neighborhood:"",city:"",country:"",maritalStatus:"Marié",numberOfDependents:null,NbrOfParts:"",hiringDate:null,seniority:null,currentPosition:"",exitDate:null,phonenumbers:null,email:null,avatar1:U,formErrors:{matricule:!1,civility:!1,firstName:!1,lastName:!1,birthdate:!1,birthplace:!1,nationality:!1,pictureURL:!1,CNPSnumber:!1,CMUnumber:!1,street:!1,neighborhood:!1,city:!1,country:!1,maritalStatus:!1,numberOfDependents:!1,NbrOfParts:!1,hiringDate:!1,seniority:!1,currentPosition:!1,exitDate:!1,phonenumbers:!1,email:!1}}),E=c(),V=c(e);c(!1);const O=t=>{const l=new FileReader,{files:a}=t.target;a&&a.length&&(l.readAsDataURL(a[0]),l.onload=()=>{typeof l.result=="string"&&(V.value.pictureURL=a[0]),V.value.avatar1=l.result})},R=()=>{V.value.avatar1=U};c(d);const L=t=>{const a=t.target.files[0];a?(a.name.split("\\").pop(),d.file=a):d.file=null};function M(t){fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer"+N.getToken(),database:N.getDatabase()},body:JSON.stringify({})}).then(l=>l.blob()).then(l=>{const a=document.createElement("a"),f=window.URL.createObjectURL(l);a.href=f,a.download="invalid_employees.xlsx",a.click(),window.URL.revokeObjectURL(f)}).catch(l=>{console.error("Erreur lors du téléchargement du fichier :",l)})}const k=()=>{console.log(d),v.importEmploye(d).then(t=>{if(console.log(t),t.status===200){const l=t.headers["content-type"]=="application/vnd.ms-excel";console.log(t.response),l&&M(t.request.responseURL)}n.value={show:!0,text:"Modifié avec succès",color:"success"}}).catch(t=>{console.log(t)})},F=()=>{console.log(e),v.createEmploye(e).then(t=>{e.formErrors.firstName=!1,e.formErrors.lastName=!1,e.formErrors.email=!1,e.formErrors.street=!1,e.formErrors.matricule=!1,e.formErrors.maritalStatus=!1,e.formErrors.phonenumbers=!1,e.formErrors.CNPSnumber=!1,e.formErrors.currentPosition=!1,e.formErrors.numberOfDependents=!1,e.formErrors.birthdate=!1,e.formErrors.birthplace=!1,e.formErrors.city=!1,e.formErrors.country=!1,e.formErrors.CNPSnumber=!1,e.formErrors.country=!1,e.formErrors.exitDate=!1,e.formErrors.civility=!1,e.formErrors.nationality=!1,e.formErrors.seniority=!1,e.formErrors.pictureURL=!1,e.formErrors.neighborhood=!1,e.formErrors.NbrOfParts=!1,e.formErrors.hiringDate=!1,e.formErrors.CMUnumber=!1,n.value={show:!0,text:"Enregistré avec succès",color:"success"}}).catch(t=>{t.response.data.firstName&&(e.formErrors.firstName=!0,n.value={show:!0,text:t.response.data.firstName,color:"danger"}),t.response.data.lastName&&(e.formErrors.lastName=!0,n.value={show:!0,text:t.response.data.lastName,color:"danger"}),t.response.data.email&&(e.formErrors.email=!0,n.value={show:!0,text:t.response.data.email,color:"danger"}),t.response.data.street&&(e.formErrors.street=!0,n.value={show:!0,text:t.response.data.street,color:"danger"}),t.response.data.matricule&&(e.formErrors.matricule=!0,n.value={show:!0,text:t.response.data.matricule,color:"danger"}),t.response.data.maritalStatus&&(e.formErrors.maritalStatus=!0,n.value={show:!0,text:t.response.data.maritalStatus,color:"danger"}),t.response.data.phonenumbers&&(e.formErrors.phonenumbers=!0,n.value={show:!0,text:t.response.data.phonenumbers,color:"danger"}),t.response.data.CNPSnumber&&(e.formErrors.CNPSnumber=!0,n.value={show:!0,text:t.response.data.CNPSnumber,color:"danger"}),t.response.data.currentPosition&&(e.formErrors.currentPosition=!0,n.value={show:!0,text:t.response.data.currentPosition,color:"danger"}),t.response.data.numberOfDependents&&(e.formErrors.numberOfDependents=!0,n.value={show:!0,text:t.response.data.numberOfDependents,color:"danger"}),t.response.data.birthdate&&(e.formErrors.birthdate=!0,n.value={show:!0,text:t.response.data.birthdate,color:"danger"}),t.response.data.birthplace&&(e.formErrors.birthplace=!0,n.value={show:!0,text:t.response.data.birthplace,color:"danger"}),t.response.data.city&&(e.formErrors.city=!0,n.value={show:!0,text:t.response.data.city,color:"danger"}),t.response.data.country&&(e.formErrors.country=!0,n.value={show:!0,text:t.response.data.country,color:"danger"}),t.response.data.exitDate&&(e.formErrors.exitDate=!0,n.value={show:!0,text:t.response.data.exitDate,color:"danger"}),t.response.data.civility&&(e.formErrors.civility=!0,n.value={show:!0,text:t.response.data.civility,color:"danger"}),t.response.data.seniority&&(e.formErrors.seniority=!0,n.value={show:!0,text:t.response.data.seniority,color:"danger"}),t.response.data.neighborhood&&(e.formErrors.neighborhood=!0,n.value={show:!0,text:t.response.data.neighborhood,color:"danger"}),t.response.data.NbrOfParts&&(e.formErrors.NbrOfParts=!0,n.value={show:!0,text:t.response.data.NbrOfParts,color:"danger"}),t.response.data.pictureURL&&(e.formErrors.pictureURL=!0,n.value={show:!0,text:t.response.data.pictureURL,color:"danger"}),t.response.data.CMUnumber&&(e.formErrors.CMUnumber=!0,n.value={show:!0,text:t.response.data.CMUnumber,color:"danger"}),t.response.data.hiringDate&&(e.formErrors.hiringDate=!0,n.value={show:!0,text:t.response.data.hiringDate,color:"danger"}),t.response.data.nationality&&(e.formErrors.nationality=!0,n.value={show:!0,text:t.response.data.nationality,color:"danger"}),console.log(t)})};return(t,l)=>(C(),D(j,null,[o(y,{class:"d-flex"},{default:s(()=>[m("form",{class:"d-flex flex-column justify-center gap-5",onSubmit:x(k,["prevent"]),enctype:"multipart/form-data"},[m("div",J,[o(u,{type:"file",accept:".xlsx",ref:"fileInput",onChange:L},null,512),o(p,{type:"submit",color:"error",variant:"tonal"},{default:s(()=>[Q,o(b,{class:"d-sm-none"})]),_:1})]),q],40,$)]),_:1}),o(z,{onSubmit:x(F,["prevent"]),enctype:"multipart/form-data"},{default:s(()=>[o(S,null,{default:s(()=>[o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).firstName,"onUpdate:modelValue":l[0]||(l[0]=a=>r(e).firstName=a),label:"Nom",placeholder:"Nom",error:r(e).formErrors.firstName},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).lastName,"onUpdate:modelValue":l[1]||(l[1]=a=>r(e).lastName=a),label:"Prénom",placeholder:"Prénom",error:r(e).formErrors.lastName},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).street,"onUpdate:modelValue":l[2]||(l[2]=a=>r(e).street=a),label:"Rue",placeholder:"Rue",error:r(e).formErrors.street},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).city,"onUpdate:modelValue":l[3]||(l[3]=a=>r(e).city=a),label:"Ville",placeholder:"Ville",error:r(e).formErrors.city},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).country,"onUpdate:modelValue":l[4]||(l[4]=a=>r(e).country=a),label:"Pays",placeholder:"Pays",error:r(e).formErrors.country},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).neighborhood,"onUpdate:modelValue":l[5]||(l[5]=a=>r(e).neighborhood=a),label:"Quartier",placeholder:"Quartier",error:r(e).formErrors.neighborhood},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).matricule,"onUpdate:modelValue":l[6]||(l[6]=a=>r(e).matricule=a),label:"Matricule",placeholder:"Matricule",error:r(e).formErrors.matricule},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{modelValue:r(e).nationality,"onUpdate:modelValue":l[7]||(l[7]=a=>r(e).nationality=a),label:"Nationalité",placeholder:"Nationalité",error:r(e).formErrors.nationality},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Date de naissance",modelValue:r(e).birthdate,"onUpdate:modelValue":l[8]||(l[8]=a=>r(e).birthdate=a),error:r(e).formErrors.birthdate,type:"date"},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Lieu de naissance",modelValue:r(e).birthplace,"onUpdate:modelValue":l[9]||(l[9]=a=>r(e).birthplace=a),placeholder:"Lieu de naissance",error:r(e).formErrors.birthplace},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Phone",modelValue:r(e).phonenumbers,"onUpdate:modelValue":l[10]||(l[10]=a=>r(e).phonenumbers=a),placeholder:"Phone",type:"number",error:r(e).formErrors.phonenumbers},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Email",modelValue:r(e).email,"onUpdate:modelValue":l[11]||(l[11]=a=>r(e).email=a),placeholder:"Email",type:"email",error:r(e).formErrors.email},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"CMU",modelValue:r(e).CMUnumber,"onUpdate:modelValue":l[12]||(l[12]=a=>r(e).CMUnumber=a),placeholder:"CMU",type:"number",error:r(e).formErrors.CMUnumber},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"CNPS",modelValue:r(e).CNPSnumber,"onUpdate:modelValue":l[13]||(l[13]=a=>r(e).CNPSnumber=a),placeholder:"CNPS",type:"number",error:r(e).formErrors.CNPSnumber},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Charge",modelValue:r(e).numberOfDependents,"onUpdate:modelValue":l[14]||(l[14]=a=>r(e).numberOfDependents=a),placeholder:"Nombre de charge",type:"number",error:r(e).formErrors.numberOfDependents},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Nombre de part",modelValue:r(e).NbrOfParts,"onUpdate:modelValue":l[15]||(l[15]=a=>r(e).NbrOfParts=a),placeholder:"Nombre de part",type:"number",error:r(e).formErrors.NbrOfParts},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Poste",modelValue:r(e).currentPosition,"onUpdate:modelValue":l[16]||(l[16]=a=>r(e).currentPosition=a),placeholder:"Poste",type:"text",error:r(e).formErrors.currentPosition},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Anciennieté",modelValue:r(e).seniority,"onUpdate:modelValue":l[17]||(l[17]=a=>r(e).seniority=a),placeholder:"Ancienneté",type:"number",error:r(e).formErrors.seniority},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(u,{label:"Date d'embauche",modelValue:r(e).hiringDate,"onUpdate:modelValue":l[18]||(l[18]=a=>r(e).hiringDate=a),placeholder:"Date d'embauche",type:"date",error:r(e).formErrors.hiringDate},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(P,{modelValue:r(e).maritalStatus,"onUpdate:modelValue":l[19]||(l[19]=a=>r(e).maritalStatus=a),label:"Status matimonial",items:["Marié","Celibataire","Divorsé"],error:r(e).formErrors.maritalStatus},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(P,{modelValue:r(e).civility,"onUpdate:modelValue":l[20]||(l[20]=a=>r(e).civility=a),label:"Civilité",items:["Homme","Femme"],error:r(e).formErrors.civility},null,8,["modelValue","error"])]),_:1}),o(i,{cols:"12",md:"6"},{default:s(()=>[o(y,{class:"d-flex",error:r(e).formErrors.pictureURL},{default:s(()=>[o(B,{rounded:"lg",size:"100",class:"me-6",image:r(e).avatar1},null,8,["image"]),m("form",H,[m("div",K,[o(p,{color:"primary",onClick:l[21]||(l[21]=a=>{var f;return(f=r(E))==null?void 0:f.click()})},{default:s(()=>[o(b,{icon:"mdi-cloud-upload-outline",class:"d-sm-none"}),Z]),_:1}),m("input",{ref_key:"refInputEl",ref:E,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:O},null,544),o(p,{type:"reset",color:"error",variant:"tonal"},{default:s(()=>[W,o(b,{icon:"mdi-refresh",class:"d-sm-none",onClick:R})]),_:1})]),X])]),_:1},8,["error"])]),_:1}),o(G,{modelValue:r(n).show,"onUpdate:modelValue":l[23]||(l[23]=a=>r(n).show=a),timeout:3e3,color:r(n).color,top:"top"},{action:s(({attrs:a})=>[o(p,I({text:""},a,{onClick:l[22]||(l[22]=f=>r(n).show=!1)}),{default:s(()=>[o(b,null,{default:s(()=>[h("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[h(A(r(n).text)+" ",1)]),_:1},8,["modelValue","color"]),o(i,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[o(p,{type:"submit"},{default:s(()=>[h(" Enregistré ")]),_:1}),o(p,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}}),Ee=w({__name:"createEmploye",setup(_){return(n,d)=>(C(),D("div",null,[o(S,null,{default:s(()=>[o(i,{cols:"12"},{default:s(()=>[o(T,{title:"Ajouter employé"},{default:s(()=>[o(y,null,{default:s(()=>[o(Y)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{Ee as default};
