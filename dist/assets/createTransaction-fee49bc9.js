import{d as E,r as h,O as p,o as c,c as f,e as l,k as s,i as t,Q as g,bS as _,N as w,V as C,p as d,t as U,bQ as S,m as T}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{f as k}from"./fournisseurs.service-86dc468e.js";import{c as D}from"./comptecompta.service-049e97fa.js";import{t as F}from"./transactions.service-d798a202.js";import{a as i,V as b}from"./VRow-b4fd1837.js";import{V as u}from"./VSelect-d3819a80.js";import{V}from"./VTextField-6bab4857.js";import{V as B}from"./VSnackbar-48185565.js";import{V as N}from"./VCounter-f481b6e6.js";import{a as A,V as M}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const R=E({__name:"DemoFormLayoutTransaction",setup(x){const n=h({show:!1,text:"",color:""}),m=p([]),y=p([]);D.getListComptes().then(r=>{const a=r.data.data;for(let o=0;o<a.length;o++)m.push({abbr:a[o].id,state:a[o].name});console.log(r.data.data)}).catch(r=>{r.status=="401"&&console.error(r)}),k.getAllFournisseurs().then(r=>{const a=r.data.results;for(let o=0;o<a.length;o++)y.push({abbr:a[o].id,state:a[o].name});console.log(r.data.results)}).catch(r=>{r.status=="401"&&console.error(r)});const e=p({transaction_type:null,account:null,transaction_category:null,transaction_date:null,description:null,depense_category:null,supplier:null,amount:null,formErrors:{transaction_type:!1,account:!1,transaction_category:!1,transaction_date:!1,description:!1,supplier:!1,amount:!1,depense_category:!1}}),v=()=>{console.log(e),F.createTransation(e).then(r=>{e.formErrors.transaction_type=!1,e.formErrors.account=!1,e.formErrors.transaction_category=!1,e.formErrors.transaction_date=!1,e.formErrors.description=!1,e.formErrors.supplier=!1,e.formErrors.amount=!1,e.formErrors.depense_category=!1,e.account=null,e.amount=null,e.depense_category=null,e.description=null,e.transaction_category=null,e.transaction_date=null,n.value={show:!0,text:"Enregistré avec succès",color:"green"}}).catch(r=>{r.response.data.amount?(e.formErrors.amount=!0,n.value={show:!0,text:r.response.data.amount,color:"red"}):e.formErrors.amount=!1,r.response.data.transaction_type?(e.formErrors.transaction_type=!0,n.value={show:!0,text:r.response.data.transaction_type,color:"red"}):e.formErrors.transaction_type=!1,r.response.data.account?(e.formErrors.account=!0,n.value={show:!0,text:r.response.data.account,color:"red"}):e.formErrors.account=!1,r.response.data.transaction_category?(e.formErrors.transaction_category=!0,n.value={show:!0,text:r.response.data.transaction_category,color:"red"}):e.formErrors.transaction_category=!1,r.response.data.transaction_date?(e.formErrors.transaction_date=!0,n.value={show:!0,text:r.response.data.transaction_date,color:"red"}):e.formErrors.transaction_date=!1,r.response.data.account,e.formErrors.account=!1,r.response.data.description?(e.formErrors.description=!0,n.value={show:!0,text:r.response.data.description,color:"red"}):e.formErrors.description=!1,r.response.data.supplier?(e.formErrors.supplier=!0,n.value={show:!0,text:r.response.data.supplier,color:"red"}):e.formErrors.supplier=!1,r.response.data.depense_category?(e.formErrors.depense_category=!0,n.value={show:!0,text:r.response.data.depense_category,color:"red"}):e.formErrors.depense_category=!1,console.log(r)})};return(r,a)=>(c(),f(N,{onSubmit:S(v,["prevent"]),enctype:"multipart/form-data"},{default:l(()=>[s(b,null,{default:l(()=>[s(i,{cols:"12",md:"6"},{default:l(()=>[s(u,{modelValue:t(e).account,"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).account=o),label:"Comptes",items:t(m),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:t(e).formErrors.account},null,8,["modelValue","items","error"])]),_:1}),s(i,{cols:"12",md:"6"},{default:l(()=>[s(u,{modelValue:t(e).transaction_type,"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).transaction_type=o),label:"Type de transaction",items:["Achat","Vente","Transfert","Virement"],error:t(e).formErrors.transaction_type},null,8,["modelValue","error"])]),_:1}),s(i,{cols:"12",md:"6"},{default:l(()=>[s(u,{modelValue:t(e).transaction_category,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).transaction_category=o),label:"Catégorie de transaction",items:["Dépense","Révenu"],error:t(e).formErrors.transaction_type},null,8,["modelValue","error"])]),_:1}),t(e).transaction_category=="Dépense"?(c(),f(i,{key:0,cols:"12",md:"6"},{default:l(()=>[s(u,{modelValue:t(e).depense_category,"onUpdate:modelValue":a[3]||(a[3]=o=>t(e).depense_category=o),label:"Type de depense",items:["Charge Fixe","Charge Variable","Charge directe","Charge indirecte"],error:t(e).formErrors.depense_category},null,8,["modelValue","error"])]),_:1})):g("",!0),t(e).transaction_category=="Dépense"?(c(),f(i,{key:1,cols:"12",md:"6"},{default:l(()=>[s(u,{modelValue:t(e).supplier,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).supplier=o),label:"Fournisseurs",items:t(y),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:t(e).formErrors.supplier},null,8,["modelValue","items","error"])]),_:1})):g("",!0),s(i,{cols:"12",md:"6"},{default:l(()=>[s(V,{type:"number",modelValue:t(e).amount,"onUpdate:modelValue":a[5]||(a[5]=o=>t(e).amount=o),label:"Montant ",placeholder:"Montant ",error:t(e).formErrors.account},null,8,["modelValue","error"])]),_:1}),s(i,{cols:"12",md:"6"},{default:l(()=>[s(V,{type:"text",modelValue:t(e).description,"onUpdate:modelValue":a[6]||(a[6]=o=>t(e).description=o),label:"Description",placeholder:"Description",error:t(e).formErrors.description},null,8,["modelValue","error"])]),_:1}),s(i,{cols:"12",md:"6"},{default:l(()=>[s(V,{type:"date",modelValue:t(e).transaction_date,"onUpdate:modelValue":a[7]||(a[7]=o=>t(e).transaction_date=o),label:"Date",placeholder:"ate",error:t(e).formErrors.transaction_date},null,8,["modelValue","error"])]),_:1}),s(B,{modelValue:t(n).show,"onUpdate:modelValue":a[9]||(a[9]=o=>t(n).show=o),timeout:3e3,color:t(n).color,top:"top"},{action:l(({attrs:o})=>[s(_,w({text:""},o,{onClick:a[8]||(a[8]=L=>t(n).show=!1)}),{default:l(()=>[s(C,null,{default:l(()=>[d("mdi-close")]),_:1})]),_:2},1040)]),default:l(()=>[d(U(t(n).text)+" ",1)]),_:1},8,["modelValue","color"]),s(i,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[s(_,{type:"submit"},{default:l(()=>[d(" Enregistré ")]),_:1}),s(_,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[d(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),le=E({__name:"createTransaction",setup(x){return(n,m)=>(c(),T("div",null,[s(b,null,{default:l(()=>[s(i,{cols:"12"},{default:l(()=>[s(A,{title:"Ajouter Une transaction"},{default:l(()=>[s(M,null,{default:l(()=>[s(R)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{le as default};
