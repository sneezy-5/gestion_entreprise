import{a as F}from"./caller.service-afc094da.js";import{d as h}from"./demandeconges.service-93513291.js";import{d as R,r as v,O as L,l as P,o as r,m as d,k as o,e as n,p as f,bS as D,i as c,aL as b,Q as C,f as a,Y as S,bc as U,t as x,V as M,R as O,S as Q,c as Y}from"./index-54e10577.js";import{a as T,b as j,V as q,e as z}from"./VCard-9f617b6a.js";import{V as G}from"./VDialog-d6bbd018.js";import{V as H,a as J}from"./VPagination-c4475e8a.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import{a as W,V as X}from"./VRow-b4fd1837.js";import"./VAvatar-d640487b.js";import"./VImg-17513cc0.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./forwardRefs-a29b5f65.js";import"./dialog-transition-f581d50d.js";const Z=_=>(O("data-v-14f5e676"),_=_(),Q(),_),ee={key:0,class:"flex-end"},te=Z(()=>a("thead",null,[a("tr",null,[a("th",{class:"text-uppercase"}," Employe "),a("th",{class:"text-uppercase text-center"}," Debut "),a("th",{class:"text-uppercase text-center"}," Fin "),a("th",{class:"text-uppercase text-center"}," Status "),a("th",{class:"text-uppercase text-center"}," Action ")])],-1)),se={class:"text-center"},oe={class:"text-center"},ae={class:"text-center"},le=["onClick"],ne=["onClick"],ce=["onClick"],re={class:"text-xs-center"},A=5,de=R({__name:"DemoSimpleTableDensityDemandeConge",setup(_){let V=v(0);const u=L([]),i=v(!1),w=s=>{V.value=s,i.value=!0},B=()=>{i.value=!1};let p=v(1);const m=()=>{console.log(p);const s=(p.value-1)*A,e=`limit=${A}&offset=${s}`;h.getAllDeamndeConges(e).then(l=>{const t=l.data.results;u.pop(),u.push(l.data),console.log(u[0].results,t)}).catch(l=>{(l.status="401")&&console.error(l)})},I=()=>{h.deleteDemandeConge(V.value).then(s=>{m()}).catch(s=>{(s.status="401")&&console.error(s)}),i.value=!1};m();const N=s=>{h.updateDemandeConge({status:"Accorder"},s).then(e=>{console.log(e),m()}).catch(e=>{e.status==401&&console.error(e)})},$=s=>{h.updateDemandeConge({status:"Refuser"},s).then(e=>{console.log(e),m()}).catch(e=>{e.status==401&&console.error(e)})},E=P(()=>{var s;return Math.ceil(((s=u[0])==null?void 0:s.count)/5)}),g=F.getRole();return(s,e)=>(r(),d(S,null,[o(G,{modelValue:c(i),"onUpdate:modelValue":e[0]||(e[0]=l=>b(i)?i.value=l:null),"max-width":"500px"},{default:n(()=>[o(T,null,{default:n(()=>[o(j,{class:"headline"},{default:n(()=>[f("Confirmation de suppression")]),_:1}),o(q,null,{default:n(()=>[f(" Êtes-vous sûr de vouloir supprimer ces données ? ")]),_:1}),o(z,null,{default:n(()=>[o(D,{onClick:I,style:{color:"red"}},{default:n(()=>[f("Confimer")]),_:1}),o(D,{onClick:B},{default:n(()=>[f("Annuler")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(g)=="false"?(r(),d("div",ee,[o(D,{to:"/create-demande-conge"},{default:n(()=>[f("Faire une demande")]),_:1})])):C("",!0),o(H,{density:"compact"},{default:n(()=>{var l;return[te,a("tbody",null,[(r(!0),d(S,null,U((l=c(u)[0])==null?void 0:l.results,t=>{var y;return r(),d("tr",{key:t.id},[a("td",null,x((y=t.employee)==null?void 0:y.firstName),1),a("td",se,x(t.start_date),1),a("td",oe,x(t.end_date),1),a("td",null,x(t.status),1),a("td",ae,[t.status!=="Accorder"&&t.status!=="Refuser"&&c(g)=="true"?(r(),d("button",{key:0,onClick:k=>N(t.id),style:{color:"rgb(9, 179, 37)",margin:"10px"}}," Accepter ",8,le)):C("",!0),t.status!=="Accorder"&&t.status!=="Refuser"&&c(g)=="true"?(r(),d("button",{key:1,onClick:k=>$(t.id),style:{color:"red"}}," Refuser ",8,ne)):C("",!0),t.status!=="Accorder"&&t.status!=="Refuser"&&c(g)=="false"?(r(),d("button",{key:2,onClick:k=>w(t.id)},[o(M,{icon:"mdi-trash",style:{color:"red"}})],8,ce)):C("",!0)])])}),128))])]}),_:1}),a("div",re,[o(J,{modelValue:c(p),"onUpdate:modelValue":e[1]||(e[1]=l=>b(p)?p.value=l:p=l),length:c(E),circle:"",onClick:m},null,8,["modelValue","length"])])],64))}});const ue=K(de,[["__scopeId","data-v-14f5e676"]]),Se=R({__name:"demandeconges",setup(_){return(V,u)=>(r(),Y(X,null,{default:n(()=>[o(W,{cols:"12"},{default:n(()=>[o(T,{title:"Demande de congé"},{default:n(()=>[o(ue)]),_:1})]),_:1})]),_:1}))}});export{Se as default};
