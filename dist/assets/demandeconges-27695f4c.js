import{d as R,r as v,ba as F,l as P,P as M,o as r,m as d,k as o,e as n,p as m,bV as y,i as c,aM as b,R as C,f as a,Z as S,be as U,cp as V,t as g,V as L,S as Z,T as j,c as q}from"./index-bfa2d538.js";import{a as T,b as z,V as G,e as H}from"./VCard-7877ac97.js";import{V as J}from"./VDialog-5d8d2713.js";import{V as K,a as O}from"./VPagination-5f021d48.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{a as W,V as X}from"./VRow-18416828.js";import"./VAvatar-b5327750.js";import"./VImg-d7e6df3b.js";import"./VOverlay-b657f991.js";import"./lazy-98d5b0cb.js";import"./easing-9f15041e.js";import"./forwardRefs-a29b5f65.js";import"./dialog-transition-44bf92b2.js";const Y=_=>(Z("data-v-dbff5238"),_=_(),j(),_),ee={key:0,class:"flex-end"},te=Y(()=>a("thead",null,[a("tr",null,[a("th",{class:"text-uppercase"}," Employe "),a("th",{class:"text-uppercase text-center"}," Debut "),a("th",{class:"text-uppercase text-center"}," Fin "),a("th",{class:"text-uppercase text-center"}," Status "),a("th",{class:"text-uppercase text-center"}," Action ")])],-1)),se={class:"text-center"},oe={class:"text-center"},ae={class:"text-center"},le=["onClick"],ne=["onClick"],ce=["onClick"],re={class:"text-xs-center"},A=5,de=R({__name:"DemoSimpleTableDensityDemandeConge",setup(_){let x=v(0);const u=F([]),i=v(!1),N=s=>{x.value=s,i.value=!0},w=()=>{i.value=!1};let p=v(1);const f=()=>{console.log(p);const s=(p.value-1)*A,t=`limit=${A}&offset=${s}`;V.getAllDeamndeConges(t).then(l=>{const e=l.data.results;u.pop(),u.push(l.data),console.log(u[0].results,e)}).catch(l=>{l.status=="401"&&console.error(l)})},B=()=>{V.deleteDemandeConge(x.value).then(s=>{f()}).catch(s=>{s.status=="401"&&console.error(s)}),i.value=!1};f();const I=s=>{V.updateDemandeConge({status:"Accorder"},s).then(t=>{console.log(t),f()}).catch(t=>{t.status==401&&console.error(t)})},$=s=>{V.updateDemandeConge({status:"Refuser"},s).then(t=>{console.log(t),f()}).catch(t=>{t.status==401&&console.error(t)})},E=P(()=>{var s;return Math.ceil(((s=u[0])==null?void 0:s.count)/5)}),h=M.getRole();return(s,t)=>(r(),d(S,null,[o(J,{modelValue:c(i),"onUpdate:modelValue":t[0]||(t[0]=l=>b(i)?i.value=l:null),"max-width":"500px"},{default:n(()=>[o(T,null,{default:n(()=>[o(z,{class:"headline"},{default:n(()=>[m("Confirmation de suppression")]),_:1}),o(G,null,{default:n(()=>[m(" Êtes-vous sûr de vouloir supprimer ces données ? ")]),_:1}),o(H,null,{default:n(()=>[o(y,{onClick:B,style:{color:"red"}},{default:n(()=>[m("Confimer")]),_:1}),o(y,{onClick:w},{default:n(()=>[m("Annuler")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(h)=="false"?(r(),d("div",ee,[o(y,{to:"/create-demande-conge"},{default:n(()=>[m("Faire une demande")]),_:1})])):C("",!0),o(K,{density:"compact"},{default:n(()=>{var l;return[te,a("tbody",null,[(r(!0),d(S,null,U((l=c(u)[0])==null?void 0:l.results,e=>{var D;return r(),d("tr",{key:e.id},[a("td",null,g(e==null?void 0:e.employee.firstName)+" "+g((D=e==null?void 0:e.employee)==null?void 0:D.lastName),1),a("td",se,g(e.start_date),1),a("td",oe,g(e.end_date),1),a("td",null,g(e.status),1),a("td",ae,[e.status!=="Accorder"&&e.status!=="Refuser"&&c(h)=="true"?(r(),d("button",{key:0,onClick:k=>I(e.id),style:{color:"rgb(9, 179, 37)",margin:"10px"}}," Accepter ",8,le)):C("",!0),e.status!=="Accorder"&&e.status!=="Refuser"&&c(h)=="true"?(r(),d("button",{key:1,onClick:k=>$(e.id),style:{color:"red"}}," Refuser ",8,ne)):C("",!0),e.status!=="Accorder"&&e.status!=="Refuser"&&c(h)=="false"?(r(),d("button",{key:2,onClick:k=>N(e.id)},[o(L,{icon:"mdi-trash",style:{color:"red"}})],8,ce)):C("",!0)])])}),128))])]}),_:1}),a("div",re,[o(O,{modelValue:c(p),"onUpdate:modelValue":t[1]||(t[1]=l=>b(p)?p.value=l:p=l),length:c(E),circle:"",onClick:f},null,8,["modelValue","length"])])],64))}});const ue=Q(de,[["__scopeId","data-v-dbff5238"]]),ke=R({__name:"demandeconges",setup(_){return(x,u)=>(r(),q(X,null,{default:n(()=>[o(W,{cols:"12"},{default:n(()=>[o(T,{title:"Demande de congé"},{default:n(()=>[o(ue)]),_:1})]),_:1})]),_:1}))}});export{ke as default};
