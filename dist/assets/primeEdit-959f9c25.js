import{d as E,ce as g,r as h,O as c,o as y,c as w,e as l,k as o,i as r,bS as n,N as C,V as S,p as u,t as k,bQ as P,m as R}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{e as T}from"./employees.service-ebfa0509.js";import{p as V}from"./primes.service-c95e7a5f.js";import{a as d,V as _}from"./VRow-b4fd1837.js";import{V as U}from"./VSelect-d3819a80.js";import{V as p}from"./VTextField-6bab4857.js";import{V as B}from"./VSnackbar-48185565.js";import{V as N}from"./VCounter-f481b6e6.js";import{a as D,V as F}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const M=E({__name:"DemoFormLayoutPrimeEdit",setup(x){const f=g().currentRoute.value.params.id,m=h({show:!1,text:"",color:""}),i=c([]);T.getAllEmployees().then(t=>{const a=t.data.results;for(let s=0;s<a.length;s++)i.push({state:a[s].firstName,abbr:a[s].id});console.log(i)}).catch(t=>{t.status=="401"&&console.error(t)});const e=c({title:"",amount:null,code:"",employee:null,formErrors:{title:!1,amount:!1,code:!1,employee:!1}});V.getPrime(f).then(t=>{e.id=t.data.id,e.title=t.data.title,e.amount=t.data.amount,e.code=t.data.code,e.employee=t.data.employee.id}).catch(t=>{t.status==401&&console.error(t)});const v=()=>{console.log(e),V.updatePrime(e).then(t=>{e.formErrors.title=!1,e.formErrors.amount=!1,e.formErrors.code=!1,e.formErrors.employee=!1,m.value={show:!0,text:"modifié avec succès",color:"green"}}).catch(t=>{t.response.data.RequestDate?(e.formErrors.title=!0,m.value={show:!0,text:t.response.data.title,color:"red"}):e.formErrors.title=!1,t.response.data.amount?(e.formErrors.amount=!0,m.value={show:!0,text:t.response.data.amount,color:"red"}):e.formErrors.amount=!1,t.response.data.code?(e.formErrors.code=!0,m.value={show:!0,text:t.response.data.code,color:"red"}):e.formErrors.code=!1,console.log(t)})};return(t,a)=>(y(),w(N,{onSubmit:P(v,["prevent"]),enctype:"multipart/form-data"},{default:l(()=>[o(_,null,{default:l(()=>[o(d,{cols:"12",md:"6"},{default:l(()=>[o(U,{modelValue:r(e).employee,"onUpdate:modelValue":a[0]||(a[0]=s=>r(e).employee=s),label:"Employés",items:r(i),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:r(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"text",modelValue:r(e).title,"onUpdate:modelValue":a[1]||(a[1]=s=>r(e).title=s),label:"Titre",placeholder:"Titre",error:r(e).formErrors.title},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"number",modelValue:r(e).amount,"onUpdate:modelValue":a[2]||(a[2]=s=>r(e).amount=s),label:"Montant",placeholder:"Montant",error:r(e).formErrors.amount},null,8,["modelValue","error"])]),_:1}),o(d,{cols:"12",md:"6"},{default:l(()=>[o(p,{type:"text",modelValue:r(e).code,"onUpdate:modelValue":a[3]||(a[3]=s=>r(e).code=s),label:"Code",placeholder:"Code",error:r(e).formErrors.code},null,8,["modelValue","error"])]),_:1}),o(B,{modelValue:r(m).show,"onUpdate:modelValue":a[5]||(a[5]=s=>r(m).show=s),timeout:3e3,color:r(m).color,top:"top"},{action:l(({attrs:s})=>[o(n,C({text:""},s,{onClick:a[4]||(a[4]=$=>r(m).show=!1)}),{default:l(()=>[o(S,null,{default:l(()=>[u("mdi-close")]),_:1})]),_:2},1040)]),default:l(()=>[u(k(r(m).text)+" ",1)]),_:1},8,["modelValue","color"]),o(d,{cols:"12",class:"d-flex gap-4"},{default:l(()=>[o(n,{type:"submit"},{default:l(()=>[u(" Enregistré ")]),_:1}),o(n,{type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[u(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),ae=E({__name:"primeEdit",setup(x){return(b,f)=>(y(),R("div",null,[o(_,null,{default:l(()=>[o(d,{cols:"12"},{default:l(()=>[o(D,{title:"Editer Prime"},{default:l(()=>[o(F,null,{default:l(()=>[o(M)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{ae as default};
