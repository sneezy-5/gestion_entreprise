import{d as E,r as j,O as f,ce as w,o as b,c as y,e as s,k as l,i as o,bS as c,N as S,V as T,p as u,t as U,bQ as k,m as C}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{u as D}from"./user.service-1e743d10.js";import{t as _}from"./taches.service-c43238d7.js";import{p as B}from"./projet.service-8c51f1fc.js";import{a as i,V as g}from"./VRow-b4fd1837.js";import{V}from"./VSelect-d3819a80.js";import{V as m}from"./VTextField-6bab4857.js";import{V as F}from"./VSnackbar-48185565.js";import{V as P}from"./VCounter-f481b6e6.js";import{a as R,V as L}from"./VCard-9f617b6a.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-0d5d1b04.js";import"./index-1a500ab3.js";import"./VImg-17513cc0.js";import"./ssrBoot-b02e1060.js";import"./VAvatar-d640487b.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./dialog-transition-f581d50d.js";import"./VCheckboxBtn-ebf12b5d.js";const N=E({__name:"DemoFormLayoutTacheEdit",setup(h){const d=j({show:!1,text:"",color:""}),n=f([]),p=f([]),x=w().currentRoute.value.params.id;D.getList().then(t=>{const a=t.data.data;for(let r=0;r<a.length;r++)n.push({state:a[r].username,abbr:a[r].id});console.log(n)}).catch(t=>{t.status=="401"&&console.error(t)}),B.getProjetList().then(t=>{const a=t.data.data;for(let r=0;r<a.length;r++)p.push({state:a[r].name,abbr:a[r].id});console.log(p)}).catch(t=>{t.status=="401"&&console.error(t)});const e=f({title:"",description:"",start_date:null,end_date:null,user:null,project:null,formErrors:{title:!1,description:!1,start_date:!1,end_date:!1,user:!1,project:!1}});_.getTache(x).then(t=>{e.id=t.data.id,e.title=t.data.title,e.description=t.data.description,e.end_date=t.data.end_date,e.start_date=t.data.start_date,e.project=t.data.project.id,e.user=t.data.user,console.log(t)}).catch(t=>{t.status==401&&console.error(t)});const v=()=>{console.log(e),_.updateTache(e).then(t=>{e.formErrors.title=!1,e.formErrors.description=!1,e.formErrors.start_date=!1,e.formErrors.end_date=!1,e.formErrors.user=!1,e.formErrors.project=!1,d.value={show:!0,text:"modifié avec succès",color:"success"}}).catch(t=>{t.response.data.title?(e.formErrors.title=!0,d.value={show:!0,text:t.response.data.title,color:"danger"}):e.formErrors.title=!1,t.response.data.start_date?(e.formErrors.start_date=!0,d.value={show:!0,text:t.response.data.start_date,color:"danger"}):e.formErrors.start_date=!1,t.response.data.end_date?(e.formErrors.end_date=!0,d.value={show:!0,text:t.response.data.end_date,color:"danger"}):e.formErrors.end_date=!1,t.response.data.user?(e.formErrors.user=!0,d.value={show:!0,text:t.response.data.user,color:"danger"}):e.formErrors.user=!1,console.log(t)})};return(t,a)=>(b(),y(P,{onSubmit:k(v,["prevent"])},{default:s(()=>[l(g,null,{default:s(()=>[l(i,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:o(e).user,"onUpdate:modelValue":a[0]||(a[0]=r=>o(e).user=r),label:"Employés",items:o(n),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:o(e).formErrors.user},null,8,["modelValue","items","error"])]),_:1}),l(i,{cols:"12",md:"6"},{default:s(()=>[l(V,{modelValue:o(e).project,"onUpdate:modelValue":a[1]||(a[1]=r=>o(e).project=r),label:"Projets",items:o(p),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:o(e).formErrors.project},null,8,["modelValue","items","error"])]),_:1}),l(i,{cols:"12",md:"6"},{default:s(()=>[l(m,{type:"text",modelValue:o(e).title,"onUpdate:modelValue":a[2]||(a[2]=r=>o(e).title=r),label:"Titre",placeholder:"Titre",error:o(e).formErrors.title},null,8,["modelValue","error"])]),_:1}),l(i,{cols:"12",md:"6"},{default:s(()=>[l(m,{type:"text",modelValue:o(e).description,"onUpdate:modelValue":a[3]||(a[3]=r=>o(e).description=r),label:"Description",placeholder:"Description",error:o(e).formErrors.description},null,8,["modelValue","error"])]),_:1}),l(i,{cols:"12",md:"6"},{default:s(()=>[l(m,{type:"date",modelValue:o(e).start_date,"onUpdate:modelValue":a[4]||(a[4]=r=>o(e).start_date=r),label:"Debut",error:o(e).formErrors.start_date},null,8,["modelValue","error"])]),_:1}),l(i,{cols:"12",md:"6"},{default:s(()=>[l(m,{type:"date",modelValue:o(e).end_date,"onUpdate:modelValue":a[5]||(a[5]=r=>o(e).end_date=r),label:"Fin",error:o(e).formErrors.end_date},null,8,["modelValue","error"])]),_:1}),l(F,{modelValue:o(d).show,"onUpdate:modelValue":a[7]||(a[7]=r=>o(d).show=r),timeout:3e3,color:o(d).color,top:"top"},{action:s(({attrs:r})=>[l(c,S({text:""},r,{onClick:a[6]||(a[6]=I=>o(d).show=!1)}),{default:s(()=>[l(T,null,{default:s(()=>[u("mdi-close")]),_:1})]),_:2},1040)]),default:s(()=>[u(U(o(d).text)+" ",1)]),_:1},8,["modelValue","color"]),l(i,{cols:"12",class:"d-flex gap-4"},{default:s(()=>[l(c,{type:"submit"},{default:s(()=>[u(" Enregistré ")]),_:1}),l(c,{type:"reset",color:"secondary",variant:"tonal"},{default:s(()=>[u(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),ie=E({__name:"tacheEdit",setup(h){return(d,n)=>(b(),C("div",null,[l(g,null,{default:s(()=>[l(i,{cols:"12"},{default:s(()=>[l(R,{title:"Editer"},{default:s(()=>[l(L,null,{default:s(()=>[l(N)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{ie as default};
