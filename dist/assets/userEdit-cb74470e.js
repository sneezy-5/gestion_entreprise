import{d as E,cj as v,r as h,ba as f,ci as g,bW as c,o as _,c as U,e as r,k as a,i as s,bV as n,N as S,V as k,p as i,t as C,bS as N,m as B}from"./index-548d44d1.js";import{a as u,V as y}from"./VRow-4f92fdd1.js";import{V as R}from"./VSelect-881b3fd7.js";import{V}from"./VTextField-f85f9694.js";import{V as F}from"./VSnackbar-7e8d4438.js";import{V as T}from"./VCounter-3543cf5b.js";import{a as D,V as L}from"./VCard-fc59d69e.js";import"./forwardRefs-a29b5f65.js";import"./VMenu-528d0b92.js";import"./index-d9ad5dd9.js";import"./VImg-a20b01d5.js";import"./ssrBoot-595446f4.js";import"./VAvatar-2a93fb47.js";import"./VOverlay-3b2ac0ae.js";import"./lazy-4c34a0b5.js";import"./easing-9f15041e.js";import"./dialog-transition-ec6f11a2.js";import"./VCheckboxBtn-172bb155.js";const M=E({__name:"DemoFormLayoutUserEdit",setup(x){const p=v().currentRoute.value.params.id,m=h({show:!1,text:"",color:""}),d=f([]);g.getList().then(o=>{const t=o.data.data;for(let l=0;l<t.length;l++)d.push({state:t[l].firstName,abbr:t[l].id});console.log(d,t)}).catch(o=>{o.status=="401"&&console.error(o)});const e=f({username:"",email:"",is_superuser:null,role:null,employee:null,formErrors:{username:!1,email:!1,password:!1,role:!1,employee:!1}});c.getUser(p).then(o=>{e.id=o.data.id,e.username=o.data.username,e.email=o.data.email,e.is_superuser=o.data.is_superuser,e.employee=o.data.employee.id,console.log(o)}).catch(o=>{o.status==401&&console.error(o)});const b=()=>{console.log(e),c.updateUser(e).then(o=>{e.formErrors.username=!1,e.formErrors.email=!1,e.formErrors.employee=!1,e.formErrors.role=!1,m.value={show:!0,text:"Modifié avec succès",color:"green"}}).catch(o=>{o.response.data.data.username?(e.formErrors.username=!0,m.value={show:!0,text:o.response.data.data.username,color:"red"}):e.formErrors.username=!1,o.response.data.data.email?(e.formErrors.email=!0,m.value={show:!0,text:o.response.data.data.email,color:"red"}):e.formErrors.email=!1,o.response.data.data.employee?(e.formErrors.employee=!0,m.value={show:!0,text:o.response.data.data.employee,color:"red"}):e.formErrors.employee=!1,o.response.data.data.password?(e.formErrors.password=!0,m.value={show:!0,text:o.response.data.data.password,color:"red"}):e.formErrors.password=!1,console.log(o)})};return(o,t)=>(_(),U(T,{onSubmit:N(b,["prevent"])},{default:r(()=>[a(y,null,{default:r(()=>[a(u,{cols:"12",md:"6"},{default:r(()=>[a(R,{modelValue:s(e).employee,"onUpdate:modelValue":t[0]||(t[0]=l=>s(e).employee=l),label:"Employés",items:s(d),"item-title":"state","item-value":"abbr","persistent-hint":"","single-line":"",error:s(e).formErrors.employee},null,8,["modelValue","items","error"])]),_:1}),a(u,{cols:"12",md:"6"},{default:r(()=>[a(V,{type:"text",modelValue:s(e).username,"onUpdate:modelValue":t[1]||(t[1]=l=>s(e).username=l),label:"Nom Utilisateur",placeholder:"Nom Utilisateur",error:s(e).formErrors.username},null,8,["modelValue","error"])]),_:1}),a(u,{cols:"12",md:"6"},{default:r(()=>[a(V,{type:"text",modelValue:s(e).email,"onUpdate:modelValue":t[2]||(t[2]=l=>s(e).email=l),label:"Email",placeholder:"Email",error:s(e).formErrors.email},null,8,["modelValue","error"])]),_:1}),a(F,{modelValue:s(m).show,"onUpdate:modelValue":t[4]||(t[4]=l=>s(m).show=l),timeout:3e3,color:s(m).color,top:"top"},{action:r(({attrs:l})=>[a(n,S({text:""},l,{onClick:t[3]||(t[3]=P=>s(m).show=!1)}),{default:r(()=>[a(k,null,{default:r(()=>[i("mdi-close")]),_:1})]),_:2},1040)]),default:r(()=>[i(C(s(m).text)+" ",1)]),_:1},8,["modelValue","color"]),a(u,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[a(n,{type:"submit"},{default:r(()=>[i(" Enregistré ")]),_:1}),a(n,{type:"reset",color:"secondary",variant:"tonal"},{default:r(()=>[i(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]))}}),ae=E({__name:"userEdit",setup(x){return(w,p)=>(_(),B("div",null,[a(y,null,{default:r(()=>[a(u,{cols:"12"},{default:r(()=>[a(D,{title:"Editer"},{default:r(()=>[a(L,null,{default:r(()=>[a(M)]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{ae as default};
