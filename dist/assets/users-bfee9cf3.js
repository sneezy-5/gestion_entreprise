import{d as I,r as h,O as E,l as Y,o as w,m as C,k as e,e as t,p as u,bS as _,i as r,aL as b,f as l,bQ as q,N as z,V as v,t as x,Y as N,bc as G,R as H,S as J,P as K,c as W}from"./index-54e10577.js";import"./caller.service-afc094da.js";import{u as k}from"./user.service-1e743d10.js";import{a as y,b as T,V as X,e as A}from"./VCard-9f617b6a.js";import{V as $}from"./VDialog-d6bbd018.js";import{V as Z}from"./VCounter-f481b6e6.js";import{V as M,a as P}from"./VRow-b4fd1837.js";import{V as ee}from"./VTextField-6bab4857.js";import{V as te}from"./VSnackbar-48185565.js";import{V as se,a as oe}from"./VPagination-c4475e8a.js";import{_ as le}from"./_plugin-vue_export-helper-c27b6911.js";import"./VAvatar-d640487b.js";import"./VImg-17513cc0.js";import"./VOverlay-0a4d3386.js";import"./lazy-c224c8a4.js";import"./easing-9f15041e.js";import"./forwardRefs-a29b5f65.js";import"./dialog-transition-f581d50d.js";import"./index-1a500ab3.js";const ae=V=>(H("data-v-0bcde0c5"),V=V(),J(),V),re={style:{"min-width":"700px","margin-left":"18px"}},ne={class:"flex-end"},de=ae(()=>l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase"}," Employe "),l("th",{class:"text-uppercase text-center"}," Nom "),l("th",{class:"text-uppercase text-center"}," Email "),l("th",{class:"text-uppercase text-center"}," dernière connexion "),l("th",{class:"text-uppercase text-center"}," Action ")])],-1)),ue={class:"text-center"},ie={class:"text-center"},ce={class:"text-center"},pe={class:"text-center"},me=["onClick"],fe=["onClick"],_e=["onClick"],Ve={class:"text-xs-center"},B=5,he=I({__name:"DemoSimpleTableDensityUser",setup(V){let c=h(0);const p=E([]),i=h({show:!1,text:"",color:""}),n=h(!1);h(!1);const F=s=>{c.value=s,n.value=!0},R=s=>{c.value=s,n.value=!0},S=()=>{n.value=!1};let L=s=>{K.push({name:"edit-user",params:{id:s}})},m=h(1);const g=()=>{console.log(m);const s=(m.value-1)*B,a=`limit=${B}&offset=${s}`;k.getAllUsers(a).then(o=>{const d=o.data.results;p.pop(),p.push(o.data),console.log(p[0].results,d)}).catch(o=>{(o.status="401")&&console.error(o)})},j=()=>{k.deleteUser(c.value).then(s=>{g()}).catch(s=>{(s.status="401")&&console.error(s)}),n.value=!1};g();const O=Y(()=>{var s;return Math.ceil(((s=p[0])==null?void 0:s.count)/5)}),f=E({newpassword:"",formErrors:{newpassword:!1}}),Q=()=>{console.log(c),k.changePasswordUser(f,c.value).then(s=>{console.log(s),i.value={show:!0,text:"Modifié avec succès",color:"green"}}).catch(s=>{s.response.status==400&&console.error(s),s.response.data.newpassword?(f.formErrors.newpassword=!0,i.value={show:!0,text:s.response.data.newpassword,color:"red"}):f.formErrors.newpassword=!1}),n.value=!1};return(s,a)=>(w(),C(N,null,[e($,{modelValue:r(n),"onUpdate:modelValue":a[0]||(a[0]=o=>b(n)?n.value=o:null),"max-width":"500px"},{default:t(()=>[e(y,null,{default:t(()=>[e(T,{class:"headline"},{default:t(()=>[u("Confirmation de suppression")]),_:1}),e(X,null,{default:t(()=>[u(" Êtes-vous sûr de vouloir supprimer ces données ? ")]),_:1}),e(A,null,{default:t(()=>[e(_,{onClick:j,style:{color:"red"}},{default:t(()=>[u("Confimer")]),_:1}),e(_,{onClick:S},{default:t(()=>[u("Annuler")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:r(n),"onUpdate:modelValue":a[2]||(a[2]=o=>b(n)?n.value=o:null),"max-width":"500px"},{default:t(()=>[e(y,null,{default:t(()=>[e(T,{class:"headline"},{default:t(()=>[u("Changer mot de passe")]),_:1}),l("div",re,[e(Z,{onSubmit:q(Q,["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(P,{cols:"12",md:"6"},{default:t(()=>[e(ee,{type:"text",modelValue:r(f).newpassword,"onUpdate:modelValue":a[1]||(a[1]=o=>r(f).newpassword=o),label:"Nouveau Mot de passe",placeholder:"Nouveau Mot de passe",error:r(f).formErrors.newpassword},null,8,["modelValue","error"])]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(_,{type:"submit",style:{color:"red"}},{default:t(()=>[u("Confimer")]),_:1}),e(_,{onClick:S},{default:t(()=>[u("Annuler")]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1},8,["modelValue"]),e(te,{modelValue:r(i).show,"onUpdate:modelValue":a[4]||(a[4]=o=>r(i).show=o),timeout:3e3,color:r(i).color,top:"top"},{action:t(({attrs:o})=>[e(_,z({text:""},o,{onClick:a[3]||(a[3]=d=>r(i).show=!1)}),{default:t(()=>[e(v,null,{default:t(()=>[u("mdi-close")]),_:1})]),_:2},1040)]),default:t(()=>[u(x(r(i).text)+" ",1)]),_:1},8,["modelValue","color"]),l("div",ne,[e(_,{to:"/create-user"},{default:t(()=>[u("Ajouter")]),_:1})]),e(se,{density:"compact"},{default:t(()=>{var o;return[de,l("tbody",null,[(w(!0),C(N,null,G((o=r(p)[0])==null?void 0:o.results,d=>{var D;return w(),C("tr",{key:d.id},[l("td",null,x((D=d.employee)==null?void 0:D.firstName),1),l("td",ue,x(d.username),1),l("td",ie,x(d.email),1),l("td",ce,x(d.last_login),1),l("td",pe,[l("button",{onClick:U=>r(L)(d.id)},[e(v,{icon:"mdi-edit"})],8,me),l("button",{onClick:U=>R(d.id)},[e(v,{icon:"mdi-key-outline"})],8,fe),l("button",{onClick:U=>F(d.id)},[e(v,{icon:"mdi-trash",style:{color:"red"}})],8,_e)])])}),128))])]}),_:1}),l("div",Ve,[e(oe,{modelValue:r(m),"onUpdate:modelValue":a[5]||(a[5]=o=>b(m)?m.value=o:m=o),length:r(O),circle:"",onClick:g},null,8,["modelValue","length"])])],64))}});const xe=le(he,[["__scopeId","data-v-0bcde0c5"]]),Fe=I({__name:"users",setup(V){return(c,p)=>(w(),W(M,null,{default:t(()=>[e(P,{cols:"12"},{default:t(()=>[e(y,{title:"Utilisateurs"},{default:t(()=>[e(xe)]),_:1})]),_:1})]),_:1}))}});export{Fe as default};
